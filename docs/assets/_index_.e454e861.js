import{S as re,i as ue,s as ce,l as X,m as F,n as z,o as De,p as $e,t as K,h as M,q as y,r as oe,v as Ie,a as q,b as N,w as Te,j as P,e as h,x as I,y as te,z as r,A as ge,d as i,B as U,C as ne,D as we,E as ee,F as T,G as Le,H as Ae,I as Ue,Y as Oe,J as Re,K as Se,L as Ve,M as ve}from"./index.83cf3a15.js";import{B as Be}from"./BackButton.7c024e31.js";import{I as Ee}from"./IconBase.72bcaa5e.js";import{p as Fe}from"./index.ea5461ea.js";import{o as be,s as ke}from"./yt-search.50a2bfc9.js";import{i as ze}from"./yt-download.d4b126a3.js";import{X as Ce,g as Ke}from"./url-parser.6547294c.js";function Me(e){let t;return{c(){t=Ie("path"),q(t,"d","M443.5 420.2L336.7 312.4c20.9-26.2 33.5-59.4 33.5-95.5 0-84.5-68.5-153-153.1-153S64 132.5 64 217s68.5 153 153.1 153c36.6 0 70.1-12.8 96.5-34.2l106.1 107.1c3.2 3.4 7.6 5.1 11.9 5.1 4.1 0 8.2-1.5 11.3-4.5 6.6-6.3 6.8-16.7.6-23.3zm-226.4-83.1c-32.1 0-62.3-12.5-85-35.2-22.7-22.7-35.2-52.9-35.2-84.9 0-32.1 12.5-62.3 35.2-84.9 22.7-22.7 52.9-35.2 85-35.2s62.3 12.5 85 35.2c22.7 22.7 35.2 52.9 35.2 84.9 0 32.1-12.5 62.3-35.2 84.9-22.7 22.7-52.9 35.2-85 35.2z")},m(n,o){N(n,t,o)},p:Te,d(n){n&&P(t)}}}function ye(e){let t,n;const o=[{viewBox:"0 0 512 512"},e[0]];let u={$$slots:{default:[Me]},$$scope:{ctx:e}};for(let s=0;s<o.length;s+=1)u=X(u,o[s]);return t=new Ee({props:u}),{c(){F(t.$$.fragment)},m(s,c){z(t,s,c),n=!0},p(s,[c]){const m=c&1?De(o,[o[0],$e(s[0])]):{};c&2&&(m.$$scope={dirty:c,ctx:s}),t.$set(m)},i(s){n||(K(t.$$.fragment,s),n=!0)},o(s){M(t.$$.fragment,s),n=!1},d(s){y(t,s)}}}function Ye(e,t,n){return e.$$set=o=>{n(0,t=X(X({},t),oe(o)))},t=oe(t),[t]}class He extends re{constructor(t){super(),ue(this,t,Ye,ye,ce,{})}}function je(e){let t;return{c(){t=Ie("path"),q(t,"d","M376 144H269v179.9l47.9-47.2c5.1-5 13.3-5 18.4.1 5 5.1 5 13.3-.1 18.4l-70 69c-2.5 2.4-5.8 3.7-9.1 3.7-1.7 0-3.4-.3-5-1-1.5-.6-2.9-1.6-4.1-2.7l-70-69c-5.1-5-5.2-13.3-.1-18.4 5-5.1 13.3-5.2 18.4-.1l47.9 47.2V144H136c-22 0-40 18-40 40v240c0 22 18 40 40 40h240c22 0 40-18 40-40V184c0-22-18-40-40-40zM269 61c0-7.2-5.8-13-13-13s-13 5.8-13 13v83h26V61z")},m(n,o){N(n,t,o)},p:Te,d(n){n&&P(t)}}}function qe(e){let t,n;const o=[{viewBox:"0 0 512 512"},e[0]];let u={$$slots:{default:[je]},$$scope:{ctx:e}};for(let s=0;s<o.length;s+=1)u=X(u,o[s]);return t=new Ee({props:u}),{c(){F(t.$$.fragment)},m(s,c){z(t,s,c),n=!0},p(s,[c]){const m=c&1?De(o,[o[0],$e(s[0])]):{};c&2&&(m.$$scope={dirty:c,ctx:s}),t.$set(m)},i(s){n||(K(t.$$.fragment,s),n=!0)},o(s){M(t.$$.fragment,s),n=!1},d(s){y(t,s)}}}function Ne(e,t,n){return e.$$set=o=>{n(0,t=X(X({},t),oe(o)))},t=oe(t),[t]}class Pe extends re{constructor(t){super(),ue(this,t,Ne,qe,ce,{})}}function Xe(e){let t,n;return t=new He({}),{c(){F(t.$$.fragment)},m(o,u){z(t,o,u),n=!0},i(o){n||(K(t.$$.fragment,o),n=!0)},o(o){M(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function Ge(e){let t,n;return t=new Pe({}),{c(){F(t.$$.fragment)},m(o,u){z(t,o,u),n=!0},i(o){n||(K(t.$$.fragment,o),n=!0)},o(o){M(t.$$.fragment,o),n=!1},d(o){y(t,o)}}}function Je(e){let t,n=e[5]("C_DELETE")+"",o,u,s;return{c(){t=h("ion-button"),o=te(n),r(t,"fill","outline"),r(t,"class","secondary-button")},m(c,m){N(c,t,m),i(t,o),u||(s=U(t,"click",e[11]),u=!0)},p(c,m){m&32&&n!==(n=c[5]("C_DELETE")+"")&&ne(o,n)},d(c){c&&P(t),u=!1,s()}}}function We(e){let t,n,o,u,s,c,m=e[5](e[6]<0?"C_ADD_TRACK":"C_EDIT_TRACK")+"",D,l,C,f,b,E,g,G,w,$,J,k,O,Y,W,L,A,H,se,R,a,d,j,Q=e[5]("C_LOCAL_AUDIO_FILE")+"",ae,_e,S,fe,V,Z=e[5](e[6]<0?"C_ADD":"C_SAVE")+"",le,x,de,v,ie,pe;u=new Be({}),$=new Ce({props:{$$slots:{default:[Xe]},$$scope:{ctx:e}}}),A=new Ce({props:{$$slots:{default:[Ge]},$$scope:{ctx:e}}});let B=e[6]>=0&&Je(e);return{c(){t=h("ion-header"),n=h("ion-toolbar"),o=h("ion-buttons"),F(u.$$.fragment),s=I(),c=h("ion-title"),D=te(m),l=I(),C=h("ion-content"),f=h("div"),b=h("ion-input"),G=I(),w=h("ion-button"),F($.$$.fragment),J=I(),k=h("ion-input"),W=I(),L=h("ion-button"),F(A.$$.fragment),se=I(),R=h("ion-progress-bar"),a=I(),d=h("div"),j=h("ion-button"),ae=te(Q),_e=I(),S=h("input"),fe=I(),V=h("ion-button"),le=te(Z),de=I(),B&&B.c(),r(b,"value",E=e[0].name),r(b,"clear-input",""),r(b,"placeholder",g=e[5]("C_TITLE")),r(w,"fill","clear"),r(w,"class","search svelte-202iv"),r(k,"class","url-input svelte-202iv"),r(k,"value",O=e[0].videoUrl),r(k,"clear-input",""),r(k,"placeholder",Y=e[5]("C_YT_OR_VIDEO_ID")),r(L,"fill","clear"),r(L,"class",H="download "+(e[0].videoUrl?"":"hidden")+" svelte-202iv"),r(R,"class","progress svelte-202iv"),r(R,"type","indeterminate"),ge(R,"hidden",!e[1]),q(f,"class","add-track-content svelte-202iv"),r(j,"fill","outline"),r(j,"class","secondary-button"),q(S,"type","file"),S.hidden=!0,q(S,"accept","audio/*"),r(V,"class","add svelte-202iv"),r(V,"disabled",x=!e[0].name||!e[0].videoUrl&&!e[4]),q(d,"class","bottom svelte-202iv"),r(C,"scroll-y","false")},m(p,_){N(p,t,_),i(t,n),i(n,o),z(u,o,null),i(n,s),i(n,c),i(c,D),N(p,l,_),N(p,C,_),i(C,f),i(f,b),e[13](b),i(f,G),i(f,w),z($,w,null),i(f,J),i(f,k),i(f,W),i(f,L),z(A,L,null),i(f,se),i(f,R),i(C,a),i(C,d),i(d,j),i(j,ae),i(d,_e),i(d,S),e[15](S),i(d,fe),i(d,V),i(V,le),i(d,de),B&&B.m(d,null),v=!0,ie||(pe=[U(b,"ionChange",e[12]),U(w,"click",e[7]),U(k,"ionChange",e[14]),U(L,"click",e[8]),U(j,"click",function(){Ue(e[2].click())&&e[2].click().apply(this,arguments)}),U(S,"change",e[16]),U(V,"click",e[17])],ie=!0)},p(p,[_]){e=p,(!v||_&32)&&m!==(m=e[5](e[6]<0?"C_ADD_TRACK":"C_EDIT_TRACK")+"")&&ne(D,m),(!v||_&1&&E!==(E=e[0].name))&&r(b,"value",E),(!v||_&32&&g!==(g=e[5]("C_TITLE")))&&r(b,"placeholder",g);const me={};_&67108864&&(me.$$scope={dirty:_,ctx:e}),$.$set(me),(!v||_&1&&O!==(O=e[0].videoUrl))&&r(k,"value",O),(!v||_&32&&Y!==(Y=e[5]("C_YT_OR_VIDEO_ID")))&&r(k,"placeholder",Y);const he={};_&67108864&&(he.$$scope={dirty:_,ctx:e}),A.$set(he),(!v||_&1&&H!==(H="download "+(e[0].videoUrl?"":"hidden")+" svelte-202iv"))&&r(L,"class",H),(!v||_&2)&&ge(R,"hidden",!e[1]),(!v||_&32)&&Q!==(Q=e[5]("C_LOCAL_AUDIO_FILE")+"")&&ne(ae,Q),(!v||_&32)&&Z!==(Z=e[5](e[6]<0?"C_ADD":"C_SAVE")+"")&&ne(le,Z),(!v||_&17&&x!==(x=!e[0].name||!e[0].videoUrl&&!e[4]))&&r(V,"disabled",x),e[6]>=0&&B.p(e,_)},i(p){v||(K(u.$$.fragment,p),K($.$$.fragment,p),K(A.$$.fragment,p),v=!0)},o(p){M(u.$$.fragment,p),M($.$$.fragment,p),M(A.$$.fragment,p),v=!1},d(p){p&&P(t),y(u),p&&P(l),p&&P(C),e[13](null),y($),y(A),e[15](null),B&&B.d(),ie=!1,we(pe)}}}function Qe(e,t,n){let o,u,s,c;ee(e,Oe,a=>n(5,o=a)),ee(e,be,a=>n(19,u=a)),ee(e,ke,a=>n(20,s=a)),ee(e,Fe,a=>n(21,c=a));const{index:m}=c,D=Number(m),l=D>=0?T.copy(D):{index:T.tracks.length,name:"",videoUrl:"",markers:[]},C=s;C&&(l.videoUrl=C.id.videoId,l.name=l.name||C.snippet.title,ke.set(void 0));let f=!1,b,E,g;const G=a=>a.preventDefault(),w=a=>{a.preventDefault();const d=a.dataTransfer;!d.files||(n(4,g=d.files[0]),n(0,l.name=g.name,l),n(0,l.filePath=g.path,l))};Le(()=>{if(u){be.set(!1),setTimeout(()=>$());return}document.body.addEventListener("dragover",G),document.body.addEventListener("drop",w),Re(()=>E).then(a=>{var d;a&&((d=l==null?void 0:l.name)==null?void 0:d.length)===0&&a.setFocus()})}),Ae(()=>{document.body.removeEventListener("dragover",G),document.body.removeEventListener("drop",w)});function $(){Se("/yt-search")}async function J(){if(f)return;n(1,f=!0),await ze(Ke(l.videoUrl),l.name)||(await Ve.create({message:o("C_YT_DOWNLOAD_ERROR"),duration:5e3})).present(),n(1,f=!1)}function k(){let a=!1;g?(T.addFileTrack(g,l.name),a=!0):(D>=0?T.tracks[D]=l:(a=!0,T.tracks.push(l)),T.saveTracks()),history.back(),setTimeout(()=>{a&&T.openTrack(T.tracks[T.tracks.length-1])},50)}function O(a){n(4,g=a.target.files[0]),n(0,l.name=l.name||g.name,l),n(0,l.filePath=g.path,l)}function Y(){T.deleteTrack(D),history.back()}const W=a=>n(0,l.name=a.detail.value,l);function L(a){ve[a?"unshift":"push"](()=>{E=a,n(3,E)})}const A=a=>n(0,l.videoUrl=a.detail.value,l);function H(a){ve[a?"unshift":"push"](()=>{b=a,n(2,b)})}return[l,f,b,E,g,o,D,$,J,k,O,Y,W,L,A,H,a=>O(a),()=>k()]}class at extends re{constructor(t){super(),ue(this,t,Qe,We,ce,{})}}export{at as default};
