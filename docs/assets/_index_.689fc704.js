import{S as Z,i as ee,s as te,l as F,m as R,n as N,o as se,p as oe,t as D,h as V,q as P,r as Y,v as ne,a as J,b as S,w as ie,j as z,x as T,e as p,y as Q,z as g,d as c,B as j,C as W,a2 as de,a3 as he,$ as be,D as ge,E as ke,Y as we,G as $e,V as le,X as Ce,F as ve,A as ue,M as ye,a4 as Be}from"./index.83cf3a15.js";import{I as xe,B as Ae}from"./BackButton.7c024e31.js";import{p as M,I as qe}from"./playlist.service.2088f8aa.js";import{I as Se}from"./IoIosPlay.98311941.js";import{p as ze}from"./index.ea5461ea.js";import{I as ae}from"./IconBase.72bcaa5e.js";import{m as Ie}from"./controllers.ab23ece1.js";function De(o){let e;return{c(){e=ne("path"),J(e,"d","M133.1 128l23.6 290.7c0 16.2 13.1 29.3 29.3 29.3h141c16.2 0 29.3-13.1 29.3-29.3L379.6 128H133.1zm61.6 265L188 160h18.5l6.9 233h-18.7zm70.3 0h-18V160h18v233zm52.3 0h-18.6l6.8-233H324l-6.7 233zM364 92h-36l-26.3-23c-3.7-3.2-8.4-5-13.2-5h-64.8c-4.9 0-9.7 1.8-13.4 5L184 92h-36c-17.6 0-30 8.4-30 26h276c0-17.6-12.4-26-30-26z")},m(t,n){S(t,e,n)},p:ie,d(t){t&&z(e)}}}function Te(o){let e,t;const n=[{viewBox:"0 0 512 512"},o[0]];let l={$$slots:{default:[De]},$$scope:{ctx:o}};for(let s=0;s<n.length;s+=1)l=F(l,n[s]);return e=new ae({props:l}),{c(){R(e.$$.fragment)},m(s,i){N(e,s,i),t=!0},p(s,[i]){const f=i&1?se(n,[n[0],oe(s[0])]):{};i&2&&(f.$$scope={dirty:i,ctx:s}),e.$set(f)},i(s){t||(D(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function Ve(o,e,t){return o.$$set=n=>{t(0,e=F(F({},e),Y(n)))},e=Y(e),[e]}class He extends Z{constructor(e){super(),ee(this,e,Ve,Te,te,{})}}function Le(o){let e;return{c(){e=ne("path"),J(e,"d","M388 96H124c-15.4 0-28 12.6-28 28v264c0 15.4 12.6 28 28 28h264c15.4 0 28-12.6 28-28V124c0-15.4-12.6-28-28-28zm0 284c0 4.4-3.6 8-8 8H132c-4.4 0-8-3.6-8-8V132c0-4.4 3.6-8 8-8h248c4.4 0 8 3.6 8 8v248z")},m(t,n){S(t,e,n)},p:ie,d(t){t&&z(e)}}}function Me(o){let e,t;const n=[{viewBox:"0 0 512 512"},o[0]];let l={$$slots:{default:[Le]},$$scope:{ctx:o}};for(let s=0;s<n.length;s+=1)l=F(l,n[s]);return e=new ae({props:l}),{c(){R(e.$$.fragment)},m(s,i){N(e,s,i),t=!0},p(s,[i]){const f=i&1?se(n,[n[0],oe(s[0])]):{};i&2&&(f.$$scope={dirty:i,ctx:s}),e.$set(f)},i(s){t||(D(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function Ee(o,e,t){return o.$$set=n=>{t(0,e=F(F({},e),Y(n)))},e=Y(e),[e]}class Re extends Z{constructor(e){super(),ee(this,e,Ee,Me,te,{})}}function Ne(o){let e,t,n;return{c(){e=ne("path"),t=T(),n=ne("path"),J(e,"d","M416 64H96c-17.7 0-32 14.3-32 32v320c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V96c0-17.7-14.3-32-32-32zm4 348c0 4.4-3.6 8-8 8H100c-4.4 0-8-3.6-8-8V100c0-4.4 3.6-8 8-8h312c4.4 0 8 3.6 8 8v312z"),J(n,"d","M363.6 192.9L346 174.8c-.7-.8-1.8-1.2-2.8-1.2-1.1 0-2.1.4-2.8 1.2l-122 122.9-44.4-44.4c-.8-.8-1.8-1.2-2.8-1.2-1 0-2 .4-2.8 1.2l-17.8 17.8c-1.6 1.6-1.6 4.1 0 5.7l56 56c3.6 3.6 8 5.7 11.7 5.7 5.3 0 9.9-3.9 11.6-5.5h.1l133.7-134.4c1.4-1.7 1.4-4.2-.1-5.7z")},m(l,s){S(l,e,s),S(l,t,s),S(l,n,s)},p:ie,d(l){l&&z(e),l&&z(t),l&&z(n)}}}function Pe(o){let e,t;const n=[{viewBox:"0 0 512 512"},o[0]];let l={$$slots:{default:[Ne]},$$scope:{ctx:o}};for(let s=0;s<n.length;s+=1)l=F(l,n[s]);return e=new ae({props:l}),{c(){R(e.$$.fragment)},m(s,i){N(e,s,i),t=!0},p(s,[i]){const f=i&1?se(n,[n[0],oe(s[0])]):{};i&2&&(f.$$scope={dirty:i,ctx:s}),e.$set(f)},i(s){t||(D(e.$$.fragment,s),t=!0)},o(s){V(e.$$.fragment,s),t=!1},d(s){P(e,s)}}}function je(o,e,t){return o.$$set=n=>{t(0,e=F(F({},e),Y(n)))},e=Y(e),[e]}class Fe extends Z{constructor(e){super(),ee(this,e,je,Pe,te,{})}}function fe(o,e,t){const n=o.slice();return n[13]=e[t],n}function Ge(o){let e,t;return e=new Re({}),{c(){R(e.$$.fragment)},m(n,l){N(e,n,l),t=!0},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){P(e,n)}}}function Ke(o){let e,t;return e=new Fe({}),{c(){R(e.$$.fragment)},m(n,l){N(e,n,l),t=!0},i(n){t||(D(e.$$.fragment,n),t=!0)},o(n){V(e.$$.fragment,n),t=!1},d(n){P(e,n)}}}function _e(o){let e,t,n,l,s,i,f=o[13].name+"",$,h,k,v,w;const B=[Ke,Ge],I=[];function _(a,C){return a[13].checked?0:1}n=_(o),l=I[n]=B[n](o);function u(){return o[9](o[13])}return{c(){e=p("ion-item"),t=p("span"),l.c(),s=T(),i=p("ion-label"),$=Q(f),h=T(),J(t,"class","check svelte-11f423t"),ue(t,"checked",o[13].checked),g(i,"class","svelte-11f423t"),g(e,"class","svelte-11f423t")},m(a,C){S(a,e,C),c(e,t),I[n].m(t,null),c(e,s),c(e,i),c(i,$),c(e,h),k=!0,v||(w=j(e,"click",u),v=!0)},p(a,C){o=a;let x=n;n=_(o),n!==x&&(de(),V(I[x],1,1,()=>{I[x]=null}),he(),l=I[n],l||(l=I[n]=B[n](o),l.c()),D(l,1),l.m(t,null)),(!k||C&1)&&ue(t,"checked",o[13].checked),(!k||C&1)&&f!==(f=o[13].name+"")&&W($,f)},i(a){k||(D(l),k=!0)},o(a){V(l),k=!1},d(a){a&&z(e),I[n].d(),v=!1,w()}}}function Oe(o){let e,t,n,l,s,i,f,$=o[2]("C_ADD_TRACK")+"",h,k,v,w,B,I,_,u,a,C,x=o[2]("C_SAVE")+"",O,q,U,E;s=new xe({});let H=o[0],d=[];for(let r=0;r<H.length;r+=1)d[r]=_e(fe(o,H,r));const G=r=>V(d[r],1,1,()=>{d[r]=null});return{c(){e=p("ion-header"),t=p("ion-toolbar"),n=p("ion-buttons"),l=p("ion-button"),R(s.$$.fragment),i=T(),f=p("ion-title"),h=Q($),k=T(),v=p("ion-searchbar"),B=T(),I=p("ion-content"),_=p("ion-list");for(let r=0;r<d.length;r+=1)d[r].c();u=T(),a=p("ion-footer"),C=p("ion-button"),O=Q(x),g(l,"class","svelte-11f423t"),g(n,"class","svelte-11f423t"),g(v,"placeholder",w=o[2]("C_SEARCH")),g(t,"class","svelte-11f423t")},m(r,y){S(r,e,y),c(e,t),c(t,n),c(n,l),N(s,l,null),c(n,i),c(n,f),c(f,h),c(t,k),c(t,v),o[8](v),S(r,B,y),S(r,I,y),c(I,_);for(let b=0;b<d.length;b+=1)d[b].m(_,null);S(r,u,y),S(r,a,y),c(a,C),c(C,O),q=!0,U||(E=[j(l,"click",o[3]),j(v,"ionInput",o[5]),j(C,"click",o[6])],U=!0)},p(r,[y]){if((!q||y&4)&&$!==($=r[2]("C_ADD_TRACK")+"")&&W(h,$),(!q||y&4&&w!==(w=r[2]("C_SEARCH")))&&g(v,"placeholder",w),y&17){H=r[0];let b;for(b=0;b<H.length;b+=1){const A=fe(r,H,b);d[b]?(d[b].p(A,y),D(d[b],1)):(d[b]=_e(A),d[b].c(),D(d[b],1),d[b].m(_,null))}for(de(),b=H.length;b<d.length;b+=1)G(b);he()}(!q||y&4)&&x!==(x=r[2]("C_SAVE")+"")&&W(O,x)},i(r){if(!q){D(s.$$.fragment,r);for(let y=0;y<H.length;y+=1)D(d[y]);q=!0}},o(r){V(s.$$.fragment,r),d=d.filter(Boolean);for(let y=0;y<d.length;y+=1)V(d[y]);q=!1},d(r){r&&z(e),P(s),o[8](null),r&&z(B),r&&z(I),be(d,r),r&&z(u),r&&z(a),U=!1,ge(E)}}}function Ue(o,e,t){let n;ke(o,we,_=>t(2,n=_));let{playlist:l}=e,s=[],i="",f;$e(()=>{h()});function $(_){Ie.dismiss(_)}function h(){const _=le.exports.keyBy(l.tracks,a=>a),u=Ce(ve.tracks,i);t(0,s=le.exports.orderBy(u.map(a=>({...a,checked:_[a.index]!==void 0})),a=>a.name.toLowerCase()))}function k(_){_.checked?t(7,l.tracks=l.tracks.filter(u=>u!==_.index),l):l.tracks.push(_.index),h(),t(7,l)}function v(_){i=_.target.value,h()}function w(){M.playlists[l.index]=l,M.save(),$(!0)}function B(_){ye[_?"unshift":"push"](()=>{f=_,t(1,f)})}const I=_=>k(_);return o.$$set=_=>{"playlist"in _&&t(7,l=_.playlist)},[s,f,n,$,k,v,w,l,B,I]}class Xe extends Z{constructor(e){super(),ee(this,e,Ue,Oe,te,{playlist:7})}}function me(o,e,t){const n=o.slice();return n[14]=e[t],n}function pe(o){let e,t,n=o[14].name+"",l,s,i,f,$;return{c(){e=p("ion-item"),t=p("ion-label"),l=Q(n),s=T(),i=p("ion-reorder"),i.innerHTML="<ion-icon></ion-icon>",f=T(),g(i,"slot","end"),g(i,"class","svelte-xt07q6"),g(e,"mppm:index",$=o[14].index),g(e,"class","svelte-xt07q6")},m(h,k){S(h,e,k),c(e,t),c(t,l),c(e,s),c(e,i),c(e,f)},p(h,k){k&2&&n!==(n=h[14].name+"")&&W(l,n),k&2&&$!==($=h[14].index)&&g(e,"mppm:index",$)},d(h){h&&z(e)}}}function Ye(o){var re;let e,t,n,l,s=((re=o[0])==null?void 0:re.name)+"",i,f,$,h,k,v,w,B,I,_,u,a,C,x,O,q,U,E,H,d,G,r,y;h=new Ae({}),B=new Se({}),a=new He({});let b=o[1],A=[];for(let m=0;m<b.length;m+=1)A[m]=pe(me(o,b,m));return d=new qe({}),{c(){e=p("ion-header"),t=p("ion-toolbar"),n=p("ion-title"),l=p("span"),i=Q(s),f=T(),$=p("ion-buttons"),R(h.$$.fragment),k=T(),v=p("ion-buttons"),w=p("ion-button"),R(B.$$.fragment),_=T(),u=p("ion-button"),R(a.$$.fragment),C=T(),x=p("ion-content"),O=p("ion-list"),q=p("ion-reorder-group");for(let m=0;m<A.length;m+=1)A[m].c();U=T(),E=p("ion-fab"),H=p("ion-fab-button"),R(d.$$.fragment),g(n,"class","svelte-xt07q6"),g(w,"class","start-playlist svelte-xt07q6"),g(w,"disabled",I=o[0].tracks.length===0),g(w,"fill","clear"),g(u,"class","svelte-xt07q6"),g(v,"slot","end"),g(v,"class","right-buttons svelte-xt07q6"),g(t,"class","svelte-xt07q6"),g(q,"disabled","false"),g(E,"vertical","bottom"),g(E,"horizontal","end"),g(E,"slot","fixed"),g(E,"class","svelte-xt07q6")},m(m,K){S(m,e,K),c(e,t),c(t,n),c(n,l),c(l,i),c(t,f),c(t,$),N(h,$,null),c(t,k),c(t,v),c(v,w),N(B,w,null),c(v,_),c(v,u),N(a,u,null),S(m,C,K),S(m,x,K),c(x,O),c(O,q);for(let X=0;X<A.length;X+=1)A[X].m(q,null);o[8](q),c(x,U),c(x,E),c(E,H),N(d,H,null),G=!0,r||(y=[j(l,"click",o[5]),j(w,"click",o[7]),j(u,"click",o[4]),j(q,"ionItemReorder",o[6]),j(H,"click",o[3])],r=!0)},p(m,[K]){var X;if((!G||K&1)&&s!==(s=((X=m[0])==null?void 0:X.name)+"")&&W(i,s),(!G||K&1&&I!==(I=m[0].tracks.length===0))&&g(w,"disabled",I),K&2){b=m[1];let L;for(L=0;L<b.length;L+=1){const ce=me(m,b,L);A[L]?A[L].p(ce,K):(A[L]=pe(ce),A[L].c(),A[L].m(q,null))}for(;L<A.length;L+=1)A[L].d(1);A.length=b.length}},i(m){G||(D(h.$$.fragment,m),D(B.$$.fragment,m),D(a.$$.fragment,m),D(d.$$.fragment,m),G=!0)},o(m){V(h.$$.fragment,m),V(B.$$.fragment,m),V(a.$$.fragment,m),V(d.$$.fragment,m),G=!1},d(m){m&&z(e),P(h),P(B),P(a),m&&z(C),m&&z(x),be(A,m),o[8](null),P(d),r=!1,ge(y)}}}function Je(o,e,t){let n;ke(o,ze,u=>t(11,n=u));let l,s,i=[],f;function $(){const{index:u}=n;s=Number(u),t(0,l=M.playlists[s]),t(0,l.tracks=l.tracks||[],l),$e(()=>{h(),setTimeout(()=>{location.hash.includes("add-tracks")&&k()})})}function h(){const u=le.exports.keyBy(ve.tracks,a=>a.index);t(1,i=l.tracks.map(a=>u[a]))}async function k(){const u=M.copy(l.index),a=await Ie.create({cssClass:"track-select-modal",component:Xe,componentProps:{playlist:u},showBackdrop:!0,backdropDismiss:!1});a.onDidDismiss().then(C=>{C&&(t(0,l=M.playlists[s]),h())}),a.present()}function v(){M.playlists=M.playlists.filter(u=>u.index!==l.index).map((u,a)=>({...u,index:a})),M.save(),history.back()}async function w(){const u=await Be({header:"C_EDIT_NAME",okButtonText:"C_SAVE",initialValue:l.name});u&&(t(0,l.name=u,l),M.save())}function B({detail:u}){u.complete();const C=Array.from(f.querySelectorAll("ion-item")).map(x=>x.getAttribute("mppm:index")).map(Number);t(0,l.tracks=C,l),M.save()}function I(){M.start(l)}$();function _(u){ye[u?"unshift":"push"](()=>{f=u,t(2,f)})}return[l,i,f,k,v,w,B,I,_]}class st extends Z{constructor(e){super(),ee(this,e,Je,Ye,te,{})}}export{st as default};
