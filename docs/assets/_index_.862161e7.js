var Os=Object.defineProperty;var Ds=(n,e,t)=>e in n?Os(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ut=(n,e,t)=>(Ds(n,typeof e!="symbol"?e+"":e,t),t);import{S as ue,i as ce,s as fe,l as V,m as h,n as v,o as Ce,p as Pe,t as $,h as d,q as b,r as X,v as ke,a as m,b as K,w as ge,j as N,x as p,e as u,B as y,a6 as Bs,P as En,a7 as Fs,a8 as Hs,a9 as Ks,y as G,z as _,d as a,C as Y,D as wt,E as ln,Y as Ts,G as Ls,J as Ns,F as Se,M as an,V as Ws,T as As,A as be,a0 as on,a3 as Tn,$ as zs,H as Us,a2 as Ln,K as Gs,Q as Ys}from"./index.83cf3a15.js";import{I as Qs,B as qs}from"./BackButton.7c024e31.js";import{m as An}from"./long-click.c63dde78.js";import{I as Ee}from"./IconBase.72bcaa5e.js";import{p as ms,I as rn}from"./playlist.service.2088f8aa.js";import{I as Xs}from"./IoIosPlay.98311941.js";import{p as Js}from"./index.ea5461ea.js";import{g as Zs,X as oe}from"./url-parser.6547294c.js";import{m as Is}from"./controllers.ab23ece1.js";function xs(n){let e;return{c(){e=ke("path"),m(e,"d","M416.3 256c0-21 13.1-38.9 31.7-46.1-4.9-20.5-13-39.7-23.7-57.1-6.4 2.8-13.2 4.3-20.1 4.3-12.6 0-25.2-4.8-34.9-14.4-14.9-14.9-18.2-36.8-10.2-55-17.3-10.7-36.6-18.8-57-23.7C295 82.5 277 95.7 256 95.7S217 82.5 209.9 64c-20.5 4.9-39.7 13-57.1 23.7 8.1 18.1 4.7 40.1-10.2 55-9.6 9.6-22.3 14.4-34.9 14.4-6.9 0-13.7-1.4-20.1-4.3C77 170.3 68.9 189.5 64 210c18.5 7.1 31.7 25 31.7 46.1 0 21-13.1 38.9-31.6 46.1 4.9 20.5 13 39.7 23.7 57.1 6.4-2.8 13.2-4.2 20-4.2 12.6 0 25.2 4.8 34.9 14.4 14.8 14.8 18.2 36.8 10.2 54.9 17.4 10.7 36.7 18.8 57.1 23.7 7.1-18.5 25-31.6 46-31.6s38.9 13.1 46 31.6c20.5-4.9 39.7-13 57.1-23.7-8-18.1-4.6-40 10.2-54.9 9.6-9.6 22.2-14.4 34.9-14.4 6.8 0 13.7 1.4 20 4.2 10.7-17.4 18.8-36.7 23.7-57.1-18.4-7.2-31.6-25.1-31.6-46.2zm-159.4 79.9c-44.3 0-80-35.9-80-80s35.7-80 80-80 80 35.9 80 80-35.7 80-80 80z")},m(t,s){K(t,e,s)},p:ge,d(t){t&&N(e)}}}function el(n){let e,t;const s=[{viewBox:"0 0 512 512"},n[0]];let o={$$slots:{default:[xs]},$$scope:{ctx:n}};for(let l=0;l<s.length;l+=1)o=V(o,s[l]);return e=new Ee({props:o}),{c(){h(e.$$.fragment)},m(l,r){v(e,l,r),t=!0},p(l,[r]){const c=r&1?Ce(s,[s[0],Pe(l[0])]):{};r&2&&(c.$$scope={dirty:r,ctx:l}),e.$set(c)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){b(e,l)}}}function tl(n,e,t){return n.$$set=s=>{t(0,e=V(V({},e),X(s)))},e=X(e),[e]}class nl extends ue{constructor(e){super(),ce(this,e,tl,el,fe,{})}}function sl(n){let e;return{c(){e=ke("path"),m(e,"d","M256.7 160c37.5 0 63.3 20.8 63.3 50.7 0 19.8-9.6 33.5-28.1 44.4-17.4 10.1-23.3 17.5-23.3 30.3v7.9h-34.7l-.3-8.6c-1.7-20.6 5.5-33.4 23.6-44 16.9-10.1 24-16.5 24-28.9s-12-21.5-26.9-21.5c-15.1 0-26 9.8-26.8 24.6H192c.7-32.2 24.5-54.9 64.7-54.9zm-26.3 171.4c0-11.5 9.6-20.6 21.4-20.6 11.9 0 21.5 9 21.5 20.6s-9.6 20.6-21.5 20.6-21.4-9-21.4-20.6z")},m(t,s){K(t,e,s)},p:ge,d(t){t&&N(e)}}}function ll(n){let e,t;const s=[{viewBox:"0 0 512 512"},n[0]];let o={$$slots:{default:[sl]},$$scope:{ctx:n}};for(let l=0;l<s.length;l+=1)o=V(o,s[l]);return e=new Ee({props:o}),{c(){h(e.$$.fragment)},m(l,r){v(e,l,r),t=!0},p(l,[r]){const c=r&1?Ce(s,[s[0],Pe(l[0])]):{};r&2&&(c.$$scope={dirty:r,ctx:l}),e.$set(c)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){b(e,l)}}}function al(n,e,t){return n.$$set=s=>{t(0,e=V(V({},e),X(s)))},e=X(e),[e]}class ol extends ue{constructor(e){super(),ce(this,e,al,ll,fe,{})}}function rl(n){let e;return{c(){e=ke("path"),m(e,"d","M175 100v137.8L403.9 98.1c5.3-3.1 12.1.7 12.1 6.9v302c0 6.2-6.7 10-12.1 6.9L175 274.2V412c0 2.2-1.8 4-4 4h-71c-2.2 0-4-1.8-4-4V100c0-2.2 1.8-4 4-4h71c2.2 0 4 1.8 4 4z")},m(t,s){K(t,e,s)},p:ge,d(t){t&&N(e)}}}function il(n){let e,t;const s=[{viewBox:"0 0 512 512"},n[0]];let o={$$slots:{default:[rl]},$$scope:{ctx:n}};for(let l=0;l<s.length;l+=1)o=V(o,s[l]);return e=new Ee({props:o}),{c(){h(e.$$.fragment)},m(l,r){v(e,l,r),t=!0},p(l,[r]){const c=r&1?Ce(s,[s[0],Pe(l[0])]):{};r&2&&(c.$$scope={dirty:r,ctx:l}),e.$set(c)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){b(e,l)}}}function ul(n,e,t){return n.$$set=s=>{t(0,e=V(V({},e),X(s)))},e=X(e),[e]}class Rs extends ue{constructor(e){super(),ce(this,e,ul,il,fe,{})}}function cl(n){let e;return{c(){e=ke("path"),m(e,"d","M199.9 416h-63.8c-4.5 0-8.1-3.6-8.1-8V104c0-4.4 3.6-8 8.1-8h63.8c4.5 0 8.1 3.6 8.1 8v304c0 4.4-3.6 8-8.1 8zM375.9 416h-63.8c-4.5 0-8.1-3.6-8.1-8V104c0-4.4 3.6-8 8.1-8h63.8c4.5 0 8.1 3.6 8.1 8v304c0 4.4-3.6 8-8.1 8z")},m(t,s){K(t,e,s)},p:ge,d(t){t&&N(e)}}}function fl(n){let e,t;const s=[{viewBox:"0 0 512 512"},n[0]];let o={$$slots:{default:[cl]},$$scope:{ctx:n}};for(let l=0;l<s.length;l+=1)o=V(o,s[l]);return e=new Ee({props:o}),{c(){h(e.$$.fragment)},m(l,r){v(e,l,r),t=!0},p(l,[r]){const c=r&1?Ce(s,[s[0],Pe(l[0])]):{};r&2&&(c.$$scope={dirty:r,ctx:l}),e.$set(c)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){b(e,l)}}}function pl(n,e,t){return n.$$set=s=>{t(0,e=V(V({},e),X(s)))},e=X(e),[e]}class _l extends ue{constructor(e){super(),ce(this,e,pl,fl,fe,{})}}function ml(n){let e;return{c(){e=ke("path"),m(e,"d","M476.1 249.3L268 129.1c-5.4-3.1-12.3.6-12.3 6.7V251L44.3 129.1c-5.4-3.1-12.3.6-12.3 6.7v240.3c0 6.1 6.9 9.8 12.3 6.7L255.6 261v115.2c0 6.1 6.9 9.8 12.3 6.7L476 262.7c5.3-3 5.3-10.4.1-13.4z")},m(t,s){K(t,e,s)},p:ge,d(t){t&&N(e)}}}function $l(n){let e,t;const s=[{viewBox:"0 0 512 512"},n[0]];let o={$$slots:{default:[ml]},$$scope:{ctx:n}};for(let l=0;l<s.length;l+=1)o=V(o,s[l]);return e=new Ee({props:o}),{c(){h(e.$$.fragment)},m(l,r){v(e,l,r),t=!0},p(l,[r]){const c=r&1?Ce(s,[s[0],Pe(l[0])]):{};r&2&&(c.$$scope={dirty:r,ctx:l}),e.$set(c)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){b(e,l)}}}function dl(n,e,t){return n.$$set=s=>{t(0,e=V(V({},e),X(s)))},e=X(e),[e]}class Ms extends ue{constructor(e){super(),ce(this,e,dl,$l,fe,{})}}function gl(n){let e;return{c(){e=ke("path"),m(e,"d","M35.9 249.3L244 129.1c5.4-3.1 12.3.6 12.3 6.7V251l211.3-121.9c5.4-3.1 12.3.6 12.3 6.7v240.3c0 6.1-6.9 9.8-12.3 6.7L256.4 261v115.2c0 6.1-6.9 9.8-12.3 6.7L35.9 262.7c-5.2-3-5.2-10.4 0-13.4z")},m(t,s){K(t,e,s)},p:ge,d(t){t&&N(e)}}}function hl(n){let e,t;const s=[{viewBox:"0 0 512 512"},n[0]];let o={$$slots:{default:[gl]},$$scope:{ctx:n}};for(let l=0;l<s.length;l+=1)o=V(o,s[l]);return e=new Ee({props:o}),{c(){h(e.$$.fragment)},m(l,r){v(e,l,r),t=!0},p(l,[r]){const c=r&1?Ce(s,[s[0],Pe(l[0])]):{};r&2&&(c.$$scope={dirty:r,ctx:l}),e.$set(c)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){b(e,l)}}}function vl(n,e,t){return n.$$set=s=>{t(0,e=V(V({},e),X(s)))},e=X(e),[e]}class ys extends ue{constructor(e){super(),ce(this,e,vl,hl,fe,{})}}function bl(n){let e;return{c(){e=ke("path"),m(e,"d","M456.8 182.4c-20-19.6-46.8-30.4-75.2-30.4-28.5 0-55.2 10.8-75.2 30.4l-31.2 30c-1.6 1.6-1.6 4.2 0 5.7l19.4 19.1c1.5 1.5 4 1.5 5.6 0l31-30.1c13.5-13.1 31.3-20.3 50.3-20.3 19 0 36.8 7.2 50.3 20.3 13.4 13.1 20.7 30.5 20.7 49 0 18.4-7.4 35.8-20.7 48.7-13.5 13.1-31.3 20.3-50.3 20.3-19 0-36.8-7.2-50.3-20.3L205.6 182.4c-20.2-19.6-46.9-30.4-75.2-30.4-28.5 0-55.2 10.8-75.2 30.4C35.1 202 24 228.1 24 256c0 27.8 11.1 54 31.2 73.6 20 19.6 46.8 30.4 75.2 30.4 28.5 0 55.2-10.8 75.2-30.4l31-30c1.6-1.6 1.6-4.2 0-5.7L217.2 275c-1.5-1.5-4-1.5-5.6 0l-31 29.9c-13.5 13.1-31.3 20.3-50.3 20.3-19 0-36.8-7.2-50.3-20.3-13.4-13.1-20.7-30.5-20.7-49 0-18.4 7.4-35.7 20.7-48.7 13.5-13.1 31.3-20.3 50.3-20.3 19 0 36.8 7.2 50.3 20.3l125.5 122.5c20.2 19.6 46.9 30.4 75.2 30.4 28.5 0 55.2-10.8 75.2-30.4 20.2-19.6 31.3-45.7 31.3-73.6.2-27.9-10.9-54.1-31-73.7z")},m(t,s){K(t,e,s)},p:ge,d(t){t&&N(e)}}}function kl(n){let e,t;const s=[{viewBox:"0 0 512 512"},n[0]];let o={$$slots:{default:[bl]},$$scope:{ctx:n}};for(let l=0;l<s.length;l+=1)o=V(o,s[l]);return e=new Ee({props:o}),{c(){h(e.$$.fragment)},m(l,r){v(e,l,r),t=!0},p(l,[r]){const c=r&1?Ce(s,[s[0],Pe(l[0])]):{};r&2&&(c.$$scope={dirty:r,ctx:l}),e.$set(c)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){b(e,l)}}}function jl(n,e,t){return n.$$set=s=>{t(0,e=V(V({},e),X(s)))},e=X(e),[e]}class wl extends ue{constructor(e){super(),ce(this,e,jl,kl,fe,{})}}function Cl(n){let e;return{c(){e=ke("path"),m(e,"d","M368.5 240h-225c-8.8 0-16 7.2-16 16 0 4.4 1.8 8.4 4.7 11.3 2.9 2.9 6.9 4.7 11.3 4.7h225c8.8 0 16-7.2 16-16s-7.2-16-16-16z")},m(t,s){K(t,e,s)},p:ge,d(t){t&&N(e)}}}function Pl(n){let e,t;const s=[{viewBox:"0 0 512 512"},n[0]];let o={$$slots:{default:[Cl]},$$scope:{ctx:n}};for(let l=0;l<s.length;l+=1)o=V(o,s[l]);return e=new Ee({props:o}),{c(){h(e.$$.fragment)},m(l,r){v(e,l,r),t=!0},p(l,[r]){const c=r&1?Ce(s,[s[0],Pe(l[0])]):{};r&2&&(c.$$scope={dirty:r,ctx:l}),e.$set(c)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){b(e,l)}}}function El(n,e,t){return n.$$set=s=>{t(0,e=V(V({},e),X(s)))},e=X(e),[e]}class Rn extends ue{constructor(e){super(),ce(this,e,El,Pl,fe,{})}}function Tl(n){let e,t,s;return{c(){e=ke("path"),t=p(),s=ke("path"),m(e,"d","M404.3 86l-202 202c-1.5 1.5-2.3 3.5-2.3 5.6v26.5c0 4.4 3.6 7.9 7.9 7.9h26.3c2.1 0 4.2-.8 5.7-2.3l202.1-202c3.1-3.1 3.1-8.1 0-11.2L415.5 86c-3.1-3.1-8.1-3.1-11.2 0zM475.6 67l-14.4-14.4-.2-.2c-3.1-2.7-7.2-4.4-11.5-4.4-4.4 0-8.5 1.7-11.6 4.5l-11.3 11.4c-1.5 1.6-1.5 4.1 0 5.6L437 79.9l21.7 21.7c1.6 1.6 4.1 1.6 5.7 0l11.3-11.3c2.8-3.1 4.4-7.1 4.4-11.6-.1-4.4-1.7-8.6-4.5-11.7z"),m(s,"d","undefined")},m(o,l){K(o,e,l),K(o,t,l),K(o,s,l)},p:ge,d(o){o&&N(e),o&&N(t),o&&N(s)}}}function Ll(n){let e,t;const s=[{viewBox:"0 0 512 512"},n[0]];let o={$$slots:{default:[Tl]},$$scope:{ctx:n}};for(let l=0;l<s.length;l+=1)o=V(o,s[l]);return e=new Ee({props:o}),{c(){h(e.$$.fragment)},m(l,r){v(e,l,r),t=!0},p(l,[r]){const c=r&1?Ce(s,[s[0],Pe(l[0])]):{};r&2&&(c.$$scope={dirty:r,ctx:l}),e.$set(c)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){b(e,l)}}}function Al(n,e,t){return n.$$set=s=>{t(0,e=V(V({},e),X(s)))},e=X(e),[e]}class Il extends ue{constructor(e){super(),ce(this,e,Al,Ll,fe,{})}}function Rl(n){let e;return{c(){e=ke("path"),m(e,"d","M295.6 163.7c-5.1 5-5.1 13.3-.1 18.4l60.8 60.9H124.9c-7.1 0-12.9 5.8-12.9 13s5.8 13 12.9 13h231.3l-60.8 60.9c-5 5.1-4.9 13.3.1 18.4 5.1 5 13.2 5 18.3-.1l82.4-83c1.1-1.2 2-2.5 2.7-4.1.7-1.6 1-3.3 1-5 0-3.4-1.3-6.6-3.7-9.1l-82.4-83c-4.9-5.2-13.1-5.3-18.2-.3z")},m(t,s){K(t,e,s)},p:ge,d(t){t&&N(e)}}}function Ml(n){let e,t;const s=[{viewBox:"0 0 512 512"},n[0]];let o={$$slots:{default:[Rl]},$$scope:{ctx:n}};for(let l=0;l<s.length;l+=1)o=V(o,s[l]);return e=new Ee({props:o}),{c(){h(e.$$.fragment)},m(l,r){v(e,l,r),t=!0},p(l,[r]){const c=r&1?Ce(s,[s[0],Pe(l[0])]):{};r&2&&(c.$$scope={dirty:r,ctx:l}),e.$set(c)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){b(e,l)}}}function yl(n,e,t){return n.$$set=s=>{t(0,e=V(V({},e),X(s)))},e=X(e),[e]}class Sl extends ue{constructor(e){super(),ce(this,e,yl,Ml,fe,{})}}function Vl(n){let e;return{c(){e=ke("path"),m(e,"d","M216.4 163.7c5.1 5 5.1 13.3.1 18.4L155.8 243h231.3c7.1 0 12.9 5.8 12.9 13s-5.8 13-12.9 13H155.8l60.8 60.9c5 5.1 4.9 13.3-.1 18.4-5.1 5-13.2 5-18.3-.1l-82.4-83c-1.1-1.2-2-2.5-2.7-4.1-.7-1.6-1-3.3-1-5 0-3.4 1.3-6.6 3.7-9.1l82.4-83c4.9-5.2 13.1-5.3 18.2-.3z")},m(t,s){K(t,e,s)},p:ge,d(t){t&&N(e)}}}function Ol(n){let e,t;const s=[{viewBox:"0 0 512 512"},n[0]];let o={$$slots:{default:[Vl]},$$scope:{ctx:n}};for(let l=0;l<s.length;l+=1)o=V(o,s[l]);return e=new Ee({props:o}),{c(){h(e.$$.fragment)},m(l,r){v(e,l,r),t=!0},p(l,[r]){const c=r&1?Ce(s,[s[0],Pe(l[0])]):{};r&2&&(c.$$scope={dirty:r,ctx:l}),e.$set(c)},i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){b(e,l)}}}function Dl(n,e,t){return n.$$set=s=>{t(0,e=V(V({},e),X(s)))},e=X(e),[e]}class Bl extends ue{constructor(e){super(),ce(this,e,Dl,Ol,fe,{})}}function ct(n){return n.toLocaleString(void 0,{minimumFractionDigits:2})}function Ae(n){if(n==null)return n;const e=Math.floor(n/60);let t=Math.floor(n%60);return t<10&&(t=`0${t}`),`${e}:${t}`}function Fl(n){let e,t,s,o,l;return{c(){e=u("input"),m(e,"type","range"),m(e,"min","0"),m(e,"max",t=n[0]||0),e.value=s=n[1]||0,m(e,"class","slider svelte-1jmhu6f")},m(r,c){K(r,e,c),o||(l=y(e,"change",n[2]),o=!0)},p(r,[c]){c&1&&t!==(t=r[0]||0)&&m(e,"max",t),c&2&&s!==(s=r[1]||0)&&(e.value=s)},i:ge,o:ge,d(r){r&&N(e),o=!1,l()}}}function Hl(n,e,t){let{duration:s}=e,{position:o}=e;const l=Bs();function r(c){l("seek",Number(c.target.value))}return n.$$set=c=>{"duration"in c&&t(0,s=c.duration),"position"in c&&t(1,o=c.position)},[s,o,r]}class Kl extends ue{constructor(e){super(),ce(this,e,Hl,Fl,fe,{duration:0,position:1})}}function ft(n,e,t=1){return e&&(t*=-1),Math.max(0,n+t)}function Nl(){return window.mppmYouTubeIframeAPIReady}class Wl{constructor(){ut(this,"player");ut(this,"soundtouchPlayer");ut(this,"volume",1);ut(this,"playerStateChange",En());ut(this,"volumeChange",En())}destroy(){this.player&&(this.player.destroy(),this.player=void 0)}async openFile(e,t){if(this.destroy(),this.soundtouchPlayer=await Fs.getInstance(),this.player=this.soundtouchPlayer,t){this.soundtouchPlayer.setBuffer(await Hs(t));return}const s=new FileReader;s.onload=o=>{const l=o.target.result;this.soundtouchPlayer.setBuffer(l)},s.readAsArrayBuffer(e)}open(e,t,s){this.destroy(),this.player=new YT.Player(t,{videoId:Zs(e),width:s,height:"150",playerVars:{controls:1,playsinline:1},events:{onStateChange:o=>this.playerStateChange.set(o)}})}get isPlaying(){var e,t;return((t=(e=this.player)==null?void 0:e.getPlayerState)==null?void 0:t.call(e))===Ks.PLAYING}playPause(){this.isPlaying?this.player.pauseVideo():this.player.playVideo()}getCurrentTime(){var e,t;return((t=(e=this.player)==null?void 0:e.getCurrentTime)==null?void 0:t.call(e))||0}seekToStart(){this.player.seekTo(0)}backwardForward(e,t=1){this.player.seekTo(ft(this.player.getCurrentTime(),e,t))}seekTo(e){this.player.seekTo(e)}isReady(){var e;return this.isSoundtouchPlayer?(e=this.player)==null?void 0:e.isReady():Nl()}setVolume(e,{emitChangeEvent:t=!0}={}){var s,o,l,r;e=Number(Math.max(0,Math.min(1,e)).toFixed(2)),this.volume=e,(o=(s=this.soundtouchPlayer)==null?void 0:s.setVolume)==null||o.call(s,e),this.isSoundtouchPlayer||(r=(l=this.player)==null?void 0:l.setVolume)==null||r.call(l,e*100),t&&this.volumeChange.set(e)}getVolume(){return this.volume}getPitch(){var e,t;return((t=(e=this.player)==null?void 0:e.getPitch)==null?void 0:t.call(e))||1}setPitch(e){var t,s;(s=(t=this.player)==null?void 0:t.setPitch)==null||s.call(t,e)}getTempo(){var e,t;return((t=(e=this.player)==null?void 0:e.getTempo)==null?void 0:t.call(e))||1}setTempo(e){var t,s;(s=(t=this.player)==null?void 0:t.setTempo)==null||s.call(t,e)}getDuration(){var e,t;return(t=(e=this.player)==null?void 0:e.getDuration)==null?void 0:t.call(e)}get isSoundtouchPlayer(){return this.player===this.soundtouchPlayer}}const S=new Wl;function zl(n){var M;let e,t,s,o,l,r,c,C=n[3]("C_MARKER")+"",L,W,E=Ae((M=n[0])==null?void 0:M.value)+"",D,w,A,P,z,O,j,I,F=n[3]("C_SAVE")+"",Q,k,q,B=n[3]("C_DELETE")+"",H,U,Z,pe;return l=new Qs({}),{c(){e=u("ion-header"),t=u("ion-toolbar"),s=u("ion-buttons"),o=u("ion-button"),h(l.$$.fragment),r=p(),c=u("ion-title"),L=G(C),W=p(),D=G(E),w=p(),A=u("ion-content"),P=u("div"),z=u("ion-input"),j=p(),I=u("ion-button"),Q=G(F),k=p(),q=u("ion-button"),H=G(B),_(z,"value",n[1]),_(z,"clear-input",""),_(z,"placeholder",O=n[3]("C_DESCRIPTION")),_(I,"class","save svelte-10hlspl"),_(q,"fill","outline"),_(q,"class","secondary-button svelte-10hlspl"),m(P,"class","marker-detail-content svelte-10hlspl"),_(A,"class","svelte-10hlspl")},m(T,x){K(T,e,x),a(e,t),a(t,s),a(s,o),v(l,o,null),a(t,r),a(t,c),a(c,L),a(c,W),a(c,D),K(T,w,x),K(T,A,x),a(A,P),a(P,z),n[9](z),a(P,j),a(P,I),a(I,Q),a(P,k),a(P,q),a(q,H),U=!0,Z||(pe=[y(o,"click",n[5]),y(z,"ionChange",n[8]),y(I,"click",n[4]),y(q,"click",n[6])],Z=!0)},p(T,[x]){var ee;(!U||x&8)&&C!==(C=T[3]("C_MARKER")+"")&&Y(L,C),(!U||x&1)&&E!==(E=Ae((ee=T[0])==null?void 0:ee.value)+"")&&Y(D,E),(!U||x&2)&&_(z,"value",T[1]),(!U||x&8&&O!==(O=T[3]("C_DESCRIPTION")))&&_(z,"placeholder",O),(!U||x&8)&&F!==(F=T[3]("C_SAVE")+"")&&Y(Q,F),(!U||x&8)&&B!==(B=T[3]("C_DELETE")+"")&&Y(H,B)},i(T){U||($(l.$$.fragment,T),U=!0)},o(T){d(l.$$.fragment,T),U=!1},d(T){T&&N(e),b(l),T&&N(w),T&&N(A),n[9](null),Z=!1,wt(pe)}}}function Ul(n,e,t){let s;ln(n,Ts,w=>t(3,s=w));let{track:o}=e,{marker:l}=e,r="",c;function C(){t(0,l.title=r,l),Se.saveTracks(),L()}function L(){Is.dismiss()}function W(){t(7,o.markers=o.markers.filter(w=>w!==l),o),Se.saveTracks(),L()}Ls(()=>{t(1,r=l.title),Ns(()=>c).then(w=>w==null?void 0:w.setFocus())});const E=w=>t(1,r=w.detail.value);function D(w){an[w?"unshift":"push"](()=>{c=w,t(2,c)})}return n.$$set=w=>{"track"in w&&t(7,o=w.track),"marker"in w&&t(0,l=w.marker)},[l,r,c,s,C,L,W,o,E,D]}class Gl extends ue{constructor(e){super(),ce(this,e,Ul,zl,fe,{track:7,marker:0})}}const Yl=200,Ql=5;let Ss,$s;function ql(n){S.setVolume(n.volume||1,{emitChangeEvent:!1}),S.setPitch(n.pitch||1),S.setTempo(n.tempo||1)}function In(n,e=1){S.backwardForward(n,e)}function ds(n){Ss=setInterval(()=>In(n,Ql),Yl)}function gs(){clearInterval(Ss)}function Vs(n){n.markers=Ws.exports.orderBy(n.markers,e=>e.value)}function Xl(n){S.setVolume(1,{emitChangeEvent:!1}),n.volume=1,pt()}function Jl(n){S.setPitch(n.pitch=1),pt()}function Zl(n){S.setTempo(n.tempo=1),pt()}function hs(n,e,t,s=.05){const o=ft(e||1,t,s);S.setVolume(o,{emitChangeEvent:!1}),n.volume=S.getVolume(),pt()}function vs(n,e,t,s=.01){S.setPitch(n.pitch=ft(e||1,t,s)),pt()}function bs(n,e,t,s=.01){S.setTempo(n.tempo=ft(e||1,t,s)),pt()}function xl({detail:n}){S.seekTo(n)}function ea(n,e,t,s=1){const{markers:o=[]}=n,l=ft(o[e].value,t,s);o[e].value=l,Vs(n);const r=o.findIndex(c=>c.value===l);jt(n,r),Se.saveTracks()}function jt(n,e){if(e<0)return;const t=n.markers[e];t&&S.seekTo(t.value)}async function ta(n,e){return new Promise(async t=>{const s=await Is.create({component:Gl,componentProps:{track:n,marker:e},showBackdrop:!0,backdropDismiss:!1});s.onDidDismiss().then(t),s.present()})}function pt(){clearTimeout($s),$s=setTimeout(()=>Se.saveTracks(),1e3)}const Be=En();function na(){const n=e=>{if(!location.pathname.includes("/track/")||e.altKey||e.ctrlKey||e.shiftKey||!S.isReady())return;const t=e.key.toUpperCase();if(t>="0"&&t<="9"){const s=t==="0"?10:Number(t);return Be.set({type:"SET_ACTIVE",index:s-1}),!1}else{if(t===" ")return S.playPause(),!1;if(t==="M"||t==="A")return Be.set({type:"ADD"}),!1;if(t==="ENTER")return S.seekToStart(),!1;if(t==="ARROWLEFT"||t==="ARROWRIGHT")return S.backwardForward(t==="ARROWLEFT"),!1;if(t==="BACKSPACE")return Be.set({type:"SEEK_TO_ACTIVE"}),!1;if(t==="ARROWUP"||t==="ARROWDOWN")return Be.set({type:"MOVE_ACTIVE",back:t==="ARROWUP"}),!1;if(t==="Q"||t==="W")S.setVolume(ft(S.getVolume(),t==="Q",.05));else{if(t==="H")return Be.set({type:"TOGGLE_HELP"}),!1;if(t==="L")return Be.set({type:"LOOP"}),!1}}};return document.addEventListener("keydown",n,!0),{destroy(){document.removeEventListener("keydown",n,!0)}}}function ks(n,e,t){const s=n.slice();return s[65]=e[t],s[67]=t,s}function sa(n){let e,t;return e=new Xs({}),{c(){h(e.$$.fragment)},m(s,o){v(e,s,o),t=!0},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){b(e,s)}}}function la(n){let e,t;return e=new _l({}),{c(){h(e.$$.fragment)},m(s,o){v(e,s,o),t=!0},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){b(e,s)}}}function aa(n){let e,t,s,o;const l=[la,sa],r=[];function c(C,L){return C[17]?0:1}return e=c(n),t=r[e]=l[e](n),{c(){t.c(),s=As()},m(C,L){r[e].m(C,L),K(C,s,L),o=!0},p(C,L){let W=e;e=c(C),e!==W&&(Ln(),d(r[W],1,1,()=>{r[W]=null}),Tn(),t=r[e],t||(t=r[e]=l[e](C),t.c()),$(t,1),t.m(s.parentNode,s))},i(C){o||($(t),o=!0)},o(C){d(t),o=!1},d(C){r[e].d(C),C&&N(s)}}}function oa(n){let e,t;return e=new Rs({}),{c(){h(e.$$.fragment)},m(s,o){v(e,s,o),t=!0},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){b(e,s)}}}function ra(n){let e,t;return e=new ys({}),{c(){h(e.$$.fragment)},m(s,o){v(e,s,o),t=!0},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){b(e,s)}}}function ia(n){let e,t;return e=new Ms({}),{c(){h(e.$$.fragment)},m(s,o){v(e,s,o),t=!0},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){b(e,s)}}}function ua(n){let e,t;return e=new Rs({}),{c(){h(e.$$.fragment)},m(s,o){v(e,s,o),t=!0},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){b(e,s)}}}function ca(n){let e,t;return e=new ys({}),{c(){h(e.$$.fragment)},m(s,o){v(e,s,o),t=!0},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){b(e,s)}}}function fa(n){let e,t;return e=new Ms({}),{c(){h(e.$$.fragment)},m(s,o){v(e,s,o),t=!0},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){b(e,s)}}}function pa(n){let e,t;return e=new wl({}),{c(){h(e.$$.fragment)},m(s,o){v(e,s,o),t=!0},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){b(e,s)}}}function _a(n){let e,t;return e=new rn({}),{c(){h(e.$$.fragment)},m(s,o){v(e,s,o),t=!0},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){b(e,s)}}}function js(n){let e,t=Ae(n[65].value)+"",s,o,l,r=(n[65].title||"")+"",c,C,L,W=n[67]+1+"",E,D,w,A;function P(){return n[41](n[65])}function z(){return n[42](n[67])}return{c(){e=u("ion-button"),s=G(t),o=p(),l=u("span"),c=G(r),C=p(),L=u("span"),E=G(W),D=p(),m(l,"class","marker-title svelte-1pjgj4h"),m(L,"class","key svelte-1pjgj4h"),_(e,"class","marker-btn svelte-1pjgj4h"),be(e,"marker-active",n[0]===n[67]),be(e,"loop-active",n[10]&&(n[0]===n[67]||n[0]+1===n[67]))},m(O,j){K(O,e,j),a(e,s),a(e,o),a(e,l),a(l,c),a(e,C),a(e,L),a(L,E),a(e,D),w||(A=[on(An.call(null,e)),y(e,"mppmClickLong",P),y(e,"mppmClick",z)],w=!0)},p(O,j){n=O,j[0]&65536&&t!==(t=Ae(n[65].value)+"")&&Y(s,t),j[0]&65536&&r!==(r=(n[65].title||"")+"")&&Y(c,r),j[0]&1&&be(e,"marker-active",n[0]===n[67]),j[0]&1025&&be(e,"loop-active",n[10]&&(n[0]===n[67]||n[0]+1===n[67]))},d(O){O&&N(e),w=!1,wt(A)}}}function ws(n){let e;return{c(){e=u("ion-spinner"),_(e,"name","dots"),_(e,"class","svelte-1pjgj4h")},m(t,s){K(t,e,s)},d(t){t&&N(e)}}}function ma(n){let e,t;return e=new Rn({}),{c(){h(e.$$.fragment)},m(s,o){v(e,s,o),t=!0},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){b(e,s)}}}function $a(n){let e,t;return e=new rn({}),{c(){h(e.$$.fragment)},m(s,o){v(e,s,o),t=!0},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){b(e,s)}}}function Cs(n){let e,t,s,o,l=ct(n[15])+"",r,c,C,L,W,E,D,w,A,P,z,O,j=ct(n[14])+"",I,F,Q,k,q,B,H,U,Z,pe;return L=new oe({props:{$$slots:{default:[da]},$$scope:{ctx:n}}}),D=new oe({props:{$$slots:{default:[ga]},$$scope:{ctx:n}}}),k=new oe({props:{$$slots:{default:[ha]},$$scope:{ctx:n}}}),H=new oe({props:{$$slots:{default:[va]},$$scope:{ctx:n}}}),{c(){e=u("div"),t=u("label"),t.textContent="Pitch",s=p(),o=u("span"),r=G(l),c=p(),C=u("ion-button"),h(L.$$.fragment),W=p(),E=u("ion-button"),h(D.$$.fragment),w=p(),A=u("div"),P=u("label"),P.textContent="Tempo",z=p(),O=u("span"),I=G(j),F=p(),Q=u("ion-button"),h(k.$$.fragment),q=p(),B=u("ion-button"),h(H.$$.fragment),m(t,"class","svelte-1pjgj4h"),_(C,"class","svelte-1pjgj4h"),_(E,"class","svelte-1pjgj4h"),m(e,"class","card svelte-1pjgj4h"),m(P,"class","svelte-1pjgj4h"),_(Q,"class","svelte-1pjgj4h"),_(B,"class","svelte-1pjgj4h"),m(A,"class","card svelte-1pjgj4h")},m(M,T){K(M,e,T),a(e,t),a(e,s),a(e,o),a(o,r),a(e,c),a(e,C),v(L,C,null),a(e,W),a(e,E),v(D,E,null),K(M,w,T),K(M,A,T),a(A,P),a(A,z),a(A,O),a(O,I),a(A,F),a(A,Q),v(k,Q,null),a(A,q),a(A,B),v(H,B,null),U=!0,Z||(pe=[y(t,"click",n[49]),y(C,"click",n[50]),y(E,"click",n[51]),y(P,"click",n[52]),y(Q,"click",n[53]),y(B,"click",n[54])],Z=!0)},p(M,T){(!U||T[0]&32768)&&l!==(l=ct(M[15])+"")&&Y(r,l);const x={};T[2]&64&&(x.$$scope={dirty:T,ctx:M}),L.$set(x);const ee={};T[2]&64&&(ee.$$scope={dirty:T,ctx:M}),D.$set(ee),(!U||T[0]&16384)&&j!==(j=ct(M[14])+"")&&Y(I,j);const _e={};T[2]&64&&(_e.$$scope={dirty:T,ctx:M}),k.$set(_e);const Ie={};T[2]&64&&(Ie.$$scope={dirty:T,ctx:M}),H.$set(Ie)},i(M){U||($(L.$$.fragment,M),$(D.$$.fragment,M),$(k.$$.fragment,M),$(H.$$.fragment,M),U=!0)},o(M){d(L.$$.fragment,M),d(D.$$.fragment,M),d(k.$$.fragment,M),d(H.$$.fragment,M),U=!1},d(M){M&&N(e),b(L),b(D),M&&N(w),M&&N(A),b(k),b(H),Z=!1,wt(pe)}}}function da(n){let e,t;return e=new Rn({}),{c(){h(e.$$.fragment)},m(s,o){v(e,s,o),t=!0},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){b(e,s)}}}function ga(n){let e,t;return e=new rn({}),{c(){h(e.$$.fragment)},m(s,o){v(e,s,o),t=!0},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){b(e,s)}}}function ha(n){let e,t;return e=new Rn({}),{c(){h(e.$$.fragment)},m(s,o){v(e,s,o),t=!0},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){b(e,s)}}}function va(n){let e,t;return e=new rn({}),{c(){h(e.$$.fragment)},m(s,o){v(e,s,o),t=!0},i(s){t||($(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){b(e,s)}}}function Ps(n){var k,q;let e,t,s,o,l,r,c=(((k=n[18])==null?void 0:k.name)||"")+"",C,L,W,E,D,w,A,P,z=(((q=n[19])==null?void 0:q.name)||"")+"",O,j,I,F,Q;return o=new Bl({}),w=new Sl({}),{c(){e=u("ion-footer"),t=u("ion-button"),s=u("span"),h(o.$$.fragment),l=p(),r=u("span"),C=G(c),W=p(),E=u("ion-button"),D=u("span"),h(w.$$.fragment),A=p(),P=u("span"),O=G(z),m(s,"class","image svelte-1pjgj4h"),m(r,"class","marker-title svelte-1pjgj4h"),_(t,"disabled",L=!n[18]),_(t,"class","svelte-1pjgj4h"),m(D,"class","image svelte-1pjgj4h"),m(P,"class","marker-title svelte-1pjgj4h"),_(E,"disabled",j=!n[19]),_(E,"class","svelte-1pjgj4h"),_(e,"class","playlist svelte-1pjgj4h")},m(B,H){K(B,e,H),a(e,t),a(t,s),v(o,s,null),a(t,l),a(t,r),a(r,C),a(e,W),a(e,E),a(E,D),v(w,D,null),a(E,A),a(E,P),a(P,O),I=!0,F||(Q=[y(t,"click",n[58]),y(E,"click",n[59])],F=!0)},p(B,H){var U,Z;(!I||H[0]&262144)&&c!==(c=(((U=B[18])==null?void 0:U.name)||"")+"")&&Y(C,c),(!I||H[0]&262144&&L!==(L=!B[18]))&&_(t,"disabled",L),(!I||H[0]&524288)&&z!==(z=(((Z=B[19])==null?void 0:Z.name)||"")+"")&&Y(O,z),(!I||H[0]&524288&&j!==(j=!B[19]))&&_(E,"disabled",j)},i(B){I||($(o.$$.fragment,B),$(w.$$.fragment,B),I=!0)},o(B){d(o.$$.fragment,B),d(w.$$.fragment,B),I=!1},d(B){B&&N(e),b(o),b(w),F=!1,wt(Q)}}}function ba(n){var ts;let e,t,s,o,l,r,c=((ts=n[16])==null?void 0:ts.name)+"",C,L,W,E,D,w,A,P,z,O,j,I,F,Q,k,q,B,H,U=n[21]("C_HELP_PLAY_PAUSE")+"",Z,pe,M,T,x,ee,_e,Ie,Fe,He,Ke,Ve=n[21]("C_HELP_TO_START")+"",_t,Ct,le,Re,Pt,Ye,Et,Qe,qe=n[21]("C_HELP_BACKWARD")+"",mt,Tt,ae,Me,Lt,Xe,At,Je,Ze=n[21]("C_HELP_FORWARD")+"",$t,It,re,me,ye,Rt,xe,Mt,et,tt=n[21]("C_HELP_TO_MARKER")+"",dt,g,J,te,Te,un,yt,Mn,St,Vt=n[21]("C_HELP_PLAY_MARKER_BACKWARD")+"",cn,Ot,yn,je,Ne,Sn,Dt,Vn,Bt,Ft=n[21]("C_HELP_MARKER_FORWARD")+"",fn,Ht,On,$e,We,Dn,Kt,Bn,Nt,Wt=n[21]("C_LOOP")+"",pn,zt,Fn,we,ze,Hn,Ut,Kn,Gt,Yt=n[21]("C_HELP_ADD_MARKER")+"",_n,Qt,Nn,gt,Wn,mn,zn,$n,Oe,nt,qt=Ae(n[11]||0)+"",dn,Un,Xt=Ae(n[12])+"",gn,Gn,De,Jt,Yn,st,hn,Zt,Qn,lt,xt,qn,he,Le,ht,en=n[21]("C_VOLUME")+"",vn,Xn,bn,tn=ct(n[13])+"",kn,Jn,vt,Ue,Zn,bt,Ge,xn,jn,nn,at,ot,sn,wn,kt,R,Cn,es;o=new qs({}),D=new nl({}),P=new ol({}),Q=new oe({props:{$$slots:{default:[aa]},$$scope:{ctx:n}}}),_e=new oe({props:{$$slots:{default:[oa]},$$scope:{ctx:n}}}),Re=new oe({props:{$$slots:{default:[ra]},$$scope:{ctx:n}}}),Me=new oe({props:{$$slots:{default:[ia]},$$scope:{ctx:n}}}),ye=new oe({props:{$$slots:{default:[ua]},$$scope:{ctx:n}}}),Te=new oe({props:{$$slots:{default:[ca]},$$scope:{ctx:n}}}),Ne=new oe({props:{$$slots:{default:[fa]},$$scope:{ctx:n}}}),We=new oe({props:{$$slots:{default:[pa]},$$scope:{ctx:n}}}),ze=new oe({props:{$$slots:{default:[_a]},$$scope:{ctx:n}}});let rt=n[16].markers,ie=[];for(let i=0;i<rt.length;i+=1)ie[i]=js(ks(n,rt,i));let de=n[8]&&ws();De=new Kl({props:{position:n[11],duration:n[12]}}),De.$on("seek",n[43]),Ue=new oe({props:{$$slots:{default:[ma]},$$scope:{ctx:n}}}),Ge=new oe({props:{$$slots:{default:[$a]},$$scope:{ctx:n}}});let ne=n[16].isFile&&Cs(n);ot=new Il({});let se=n[2]!==void 0&&Ps(n);return{c(){e=u("ion-header"),t=u("ion-toolbar"),s=u("ion-buttons"),h(o.$$.fragment),l=p(),r=u("ion-title"),C=G(c),L=p(),W=u("ion-buttons"),E=u("ion-button"),h(D.$$.fragment),w=p(),A=u("ion-button"),h(P.$$.fragment),z=p(),O=u("ion-content"),j=u("div"),I=u("div"),F=u("ion-button"),h(Q.$$.fragment),k=p(),q=u("span"),q.textContent="space",B=p(),H=u("span"),Z=G(U),pe=p(),M=u("div"),T=G(n[9]),x=p(),ee=u("ion-button"),h(_e.$$.fragment),Ie=p(),Fe=u("span"),Fe.textContent="return",He=p(),Ke=u("span"),_t=G(Ve),Ct=p(),le=u("ion-button"),h(Re.$$.fragment),Pt=p(),Ye=u("span"),Ye.textContent="left",Et=p(),Qe=u("span"),mt=G(qe),Tt=p(),ae=u("ion-button"),h(Me.$$.fragment),Lt=p(),Xe=u("span"),Xe.textContent="right",At=p(),Je=u("span"),$t=G(Ze),It=p(),re=u("div"),me=u("ion-button"),h(ye.$$.fragment),Rt=p(),xe=u("span"),xe.textContent="backspace",Mt=p(),et=u("span"),dt=G(tt),J=p(),te=u("ion-button"),h(Te.$$.fragment),un=p(),yt=u("span"),yt.textContent="up",Mn=p(),St=u("span"),cn=G(Vt),yn=p(),je=u("ion-button"),h(Ne.$$.fragment),Sn=p(),Dt=u("span"),Dt.textContent="down",Vn=p(),Bt=u("span"),fn=G(Ft),On=p(),$e=u("ion-button"),h(We.$$.fragment),Dn=p(),Kt=u("span"),Kt.textContent="L",Bn=p(),Nt=u("span"),pn=G(Wt),Fn=p(),we=u("ion-button"),h(ze.$$.fragment),Hn=p(),Ut=u("span"),Ut.textContent="a",Kn=p(),Gt=u("span"),_n=G(Yt),Nn=p(),gt=u("div");for(let i=0;i<ie.length;i+=1)ie[i].c();Wn=p(),mn=u("div"),zn=p(),de&&de.c(),$n=p(),Oe=u("div"),nt=u("span"),dn=G(qt),Un=G(" / "),gn=G(Xt),Gn=p(),h(De.$$.fragment),Yn=p(),st=u("div"),hn=u("div"),Qn=p(),lt=u("div"),qn=p(),he=u("div"),Le=u("div"),ht=u("label"),vn=G(en),Xn=p(),bn=u("span"),kn=G(tn),Jn=p(),vt=u("ion-button"),h(Ue.$$.fragment),Zn=p(),bt=u("ion-button"),h(Ge.$$.fragment),xn=p(),ne&&ne.c(),jn=p(),nn=u("div"),at=u("ion-button"),h(ot.$$.fragment),wn=p(),se&&se.c(),kt=As(),_(r,"class","svelte-1pjgj4h"),_(E,"class","svelte-1pjgj4h"),be(E,"settings-visible",n[6]),_(A,"class","svelte-1pjgj4h"),be(A,"help-visible",n[7]),_(W,"slot","end"),_(e,"class","svelte-1pjgj4h"),m(q,"class","key svelte-1pjgj4h"),m(H,"class","help svelte-1pjgj4h"),m(M,"class","play-position svelte-1pjgj4h"),_(F,"disabled",n[8]),_(F,"class","play-pause player-btn svelte-1pjgj4h"),m(Fe,"class","key svelte-1pjgj4h"),m(Ke,"class","help svelte-1pjgj4h"),_(ee,"disabled",n[8]),_(ee,"class","seek-to-start player-btn svelte-1pjgj4h"),m(Ye,"class","key svelte-1pjgj4h"),m(Qe,"class","help svelte-1pjgj4h"),_(le,"disabled",n[8]),_(le,"class","backward player-btn svelte-1pjgj4h"),m(Xe,"class","key svelte-1pjgj4h"),m(Je,"class","help svelte-1pjgj4h"),_(ae,"disabled",n[8]),_(ae,"class","forward player-btn svelte-1pjgj4h"),m(xe,"class","key svelte-1pjgj4h"),m(et,"class","help svelte-1pjgj4h"),_(me,"class","marker-play-btn svelte-1pjgj4h"),_(me,"disabled",g=n[20]||n[8]),m(yt,"class","key svelte-1pjgj4h"),m(St,"class","help svelte-1pjgj4h"),_(te,"class","marker-play-btn svelte-1pjgj4h"),_(te,"disabled",Ot=n[20]||n[8]),m(Dt,"class","key svelte-1pjgj4h"),m(Bt,"class","help svelte-1pjgj4h"),_(je,"class","marker-play-btn svelte-1pjgj4h"),_(je,"disabled",Ht=n[20]||n[8]),m(Kt,"class","key svelte-1pjgj4h"),m(Nt,"class","help svelte-1pjgj4h"),_($e,"class","loop-marker marker-play-btn svelte-1pjgj4h"),_($e,"disabled",zt=n[20]||n[8]),be($e,"loop-active",n[10]),m(Ut,"class","key svelte-1pjgj4h"),m(Gt,"class","help svelte-1pjgj4h"),_(we,"disabled",Qt=n[8]),_(we,"class","svelte-1pjgj4h"),m(re,"class","marker-tools svelte-1pjgj4h"),m(I,"class","tools svelte-1pjgj4h"),m(gt,"class","markers svelte-1pjgj4h"),m(mn,"class","spacer svelte-1pjgj4h"),m(nt,"class","svelte-1pjgj4h"),Oe.hidden=Jt=!n[16].isFile,m(Oe,"class","audio-player svelte-1pjgj4h"),m(st,"class","yt-player svelte-1pjgj4h"),st.hidden=Zt=n[16].isFile||Es,lt.hidden=xt=!n[6],m(lt,"class","settings-backdrop svelte-1pjgj4h"),m(ht,"class","svelte-1pjgj4h"),_(vt,"class","svelte-1pjgj4h"),_(bt,"class","svelte-1pjgj4h"),m(Le,"class","card svelte-1pjgj4h"),_(at,"fill","clear"),_(at,"class","svelte-1pjgj4h"),m(nn,"class","card edit-track svelte-1pjgj4h"),he.hidden=sn=!n[6],m(he,"class","settings svelte-1pjgj4h"),m(j,"class","main-content svelte-1pjgj4h"),_(O,"scroll-y","false"),_(O,"class","svelte-1pjgj4h"),be(O,"show-help",n[7])},m(i,f){K(i,e,f),a(e,t),a(t,s),v(o,s,null),a(t,l),a(t,r),a(r,C),a(t,L),a(t,W),a(W,E),v(D,E,null),a(W,w),a(W,A),v(P,A,null),K(i,z,f),K(i,O,f),a(O,j),a(j,I),a(I,F),v(Q,F,null),a(F,k),a(F,q),a(F,B),a(F,H),a(H,Z),a(F,pe),a(F,M),a(M,T),a(I,x),a(I,ee),v(_e,ee,null),a(ee,Ie),a(ee,Fe),a(ee,He),a(ee,Ke),a(Ke,_t),a(I,Ct),a(I,le),v(Re,le,null),a(le,Pt),a(le,Ye),a(le,Et),a(le,Qe),a(Qe,mt),a(I,Tt),a(I,ae),v(Me,ae,null),a(ae,Lt),a(ae,Xe),a(ae,At),a(ae,Je),a(Je,$t),a(I,It),a(I,re),a(re,me),v(ye,me,null),a(me,Rt),a(me,xe),a(me,Mt),a(me,et),a(et,dt),a(re,J),a(re,te),v(Te,te,null),a(te,un),a(te,yt),a(te,Mn),a(te,St),a(St,cn),a(re,yn),a(re,je),v(Ne,je,null),a(je,Sn),a(je,Dt),a(je,Vn),a(je,Bt),a(Bt,fn),a(re,On),a(re,$e),v(We,$e,null),a($e,Dn),a($e,Kt),a($e,Bn),a($e,Nt),a(Nt,pn),a(re,Fn),a(re,we),v(ze,we,null),a(we,Hn),a(we,Ut),a(we,Kn),a(we,Gt),a(Gt,_n),a(j,Nn),a(j,gt);for(let it=0;it<ie.length;it+=1)ie[it].m(gt,null);a(j,Wn),a(j,mn),a(j,zn),de&&de.m(j,null),a(j,$n),a(j,Oe),a(Oe,nt),a(nt,dn),a(nt,Un),a(nt,gn),a(Oe,Gn),v(De,Oe,null),a(j,Yn),a(j,st),a(st,hn),n[44](hn),a(j,Qn),a(j,lt),a(j,qn),a(j,he),a(he,Le),a(Le,ht),a(ht,vn),a(Le,Xn),a(Le,bn),a(bn,kn),a(Le,Jn),a(Le,vt),v(Ue,vt,null),a(Le,Zn),a(Le,bt),v(Ge,bt,null),a(he,xn),ne&&ne.m(he,null),a(he,jn),a(he,nn),a(nn,at),v(ot,at,null),n[56](he),n[57](O),K(i,wn,f),se&&se.m(i,f),K(i,kt,f),R=!0,Cn||(es=[y(E,"click",n[31]),y(A,"click",n[32]),y(F,"click",n[23]),y(ee,"click",n[24]),on(An.call(null,le)),y(le,"mppmClick",n[33]),y(le,"mppmClickLong",n[34]),y(le,"mppmClickEnd",gs),on(An.call(null,ae)),y(ae,"mppmClick",n[35]),y(ae,"mppmClickLong",n[36]),y(ae,"mppmClickEnd",gs),y(me,"click",n[37]),y(te,"click",n[38]),y(je,"click",n[39]),y($e,"click",n[40]),y(we,"click",n[25]),y(lt,"click",n[45]),y(ht,"click",n[46]),y(vt,"click",n[47]),y(bt,"click",n[48]),y(at,"click",n[55]),on(na.call(null,O))],Cn=!0)},p(i,f){var ps;(!R||f[0]&65536)&&c!==(c=((ps=i[16])==null?void 0:ps.name)+"")&&Y(C,c),(!R||f[0]&64)&&be(E,"settings-visible",i[6]),(!R||f[0]&128)&&be(A,"help-visible",i[7]);const it={};f[0]&131072|f[2]&64&&(it.$$scope={dirty:f,ctx:i}),Q.$set(it),(!R||f[0]&2097152)&&U!==(U=i[21]("C_HELP_PLAY_PAUSE")+"")&&Y(Z,U),(!R||f[0]&512)&&Y(T,i[9]),(!R||f[0]&256)&&_(F,"disabled",i[8]);const ns={};f[2]&64&&(ns.$$scope={dirty:f,ctx:i}),_e.$set(ns),(!R||f[0]&2097152)&&Ve!==(Ve=i[21]("C_HELP_TO_START")+"")&&Y(_t,Ve),(!R||f[0]&256)&&_(ee,"disabled",i[8]);const ss={};f[2]&64&&(ss.$$scope={dirty:f,ctx:i}),Re.$set(ss),(!R||f[0]&2097152)&&qe!==(qe=i[21]("C_HELP_BACKWARD")+"")&&Y(mt,qe),(!R||f[0]&256)&&_(le,"disabled",i[8]);const ls={};f[2]&64&&(ls.$$scope={dirty:f,ctx:i}),Me.$set(ls),(!R||f[0]&2097152)&&Ze!==(Ze=i[21]("C_HELP_FORWARD")+"")&&Y($t,Ze),(!R||f[0]&256)&&_(ae,"disabled",i[8]);const as={};f[2]&64&&(as.$$scope={dirty:f,ctx:i}),ye.$set(as),(!R||f[0]&2097152)&&tt!==(tt=i[21]("C_HELP_TO_MARKER")+"")&&Y(dt,tt),(!R||f[0]&1048832&&g!==(g=i[20]||i[8]))&&_(me,"disabled",g);const os={};f[2]&64&&(os.$$scope={dirty:f,ctx:i}),Te.$set(os),(!R||f[0]&2097152)&&Vt!==(Vt=i[21]("C_HELP_PLAY_MARKER_BACKWARD")+"")&&Y(cn,Vt),(!R||f[0]&1048832&&Ot!==(Ot=i[20]||i[8]))&&_(te,"disabled",Ot);const rs={};f[2]&64&&(rs.$$scope={dirty:f,ctx:i}),Ne.$set(rs),(!R||f[0]&2097152)&&Ft!==(Ft=i[21]("C_HELP_MARKER_FORWARD")+"")&&Y(fn,Ft),(!R||f[0]&1048832&&Ht!==(Ht=i[20]||i[8]))&&_(je,"disabled",Ht);const is={};f[2]&64&&(is.$$scope={dirty:f,ctx:i}),We.$set(is),(!R||f[0]&2097152)&&Wt!==(Wt=i[21]("C_LOOP")+"")&&Y(pn,Wt),(!R||f[0]&1048832&&zt!==(zt=i[20]||i[8]))&&_($e,"disabled",zt),(!R||f[0]&1024)&&be($e,"loop-active",i[10]);const us={};if(f[2]&64&&(us.$$scope={dirty:f,ctx:i}),ze.$set(us),(!R||f[0]&2097152)&&Yt!==(Yt=i[21]("C_HELP_ADD_MARKER")+"")&&Y(_n,Yt),(!R||f[0]&256&&Qt!==(Qt=i[8]))&&_(we,"disabled",Qt),f[0]&604046337){rt=i[16].markers;let ve;for(ve=0;ve<rt.length;ve+=1){const _s=ks(i,rt,ve);ie[ve]?ie[ve].p(_s,f):(ie[ve]=js(_s),ie[ve].c(),ie[ve].m(gt,null))}for(;ve<ie.length;ve+=1)ie[ve].d(1);ie.length=rt.length}i[8]?de||(de=ws(),de.c(),de.m(j,$n)):de&&(de.d(1),de=null),(!R||f[0]&2048)&&qt!==(qt=Ae(i[11]||0)+"")&&Y(dn,qt),(!R||f[0]&4096)&&Xt!==(Xt=Ae(i[12])+"")&&Y(gn,Xt);const Pn={};f[0]&2048&&(Pn.position=i[11]),f[0]&4096&&(Pn.duration=i[12]),De.$set(Pn),(!R||f[0]&65536&&Jt!==(Jt=!i[16].isFile))&&(Oe.hidden=Jt),(!R||f[0]&65536&&Zt!==(Zt=i[16].isFile||Es))&&(st.hidden=Zt),(!R||f[0]&64&&xt!==(xt=!i[6]))&&(lt.hidden=xt),(!R||f[0]&2097152)&&en!==(en=i[21]("C_VOLUME")+"")&&Y(vn,en),(!R||f[0]&8192)&&tn!==(tn=ct(i[13])+"")&&Y(kn,tn);const cs={};f[2]&64&&(cs.$$scope={dirty:f,ctx:i}),Ue.$set(cs);const fs={};f[2]&64&&(fs.$$scope={dirty:f,ctx:i}),Ge.$set(fs),i[16].isFile?ne?(ne.p(i,f),f[0]&65536&&$(ne,1)):(ne=Cs(i),ne.c(),$(ne,1),ne.m(he,jn)):ne&&(Ln(),d(ne,1,1,()=>{ne=null}),Tn()),(!R||f[0]&64&&sn!==(sn=!i[6]))&&(he.hidden=sn),(!R||f[0]&128)&&be(O,"show-help",i[7]),i[2]!==void 0?se?(se.p(i,f),f[0]&4&&$(se,1)):(se=Ps(i),se.c(),$(se,1),se.m(kt.parentNode,kt)):se&&(Ln(),d(se,1,1,()=>{se=null}),Tn())},i(i){R||($(o.$$.fragment,i),$(D.$$.fragment,i),$(P.$$.fragment,i),$(Q.$$.fragment,i),$(_e.$$.fragment,i),$(Re.$$.fragment,i),$(Me.$$.fragment,i),$(ye.$$.fragment,i),$(Te.$$.fragment,i),$(Ne.$$.fragment,i),$(We.$$.fragment,i),$(ze.$$.fragment,i),$(De.$$.fragment,i),$(Ue.$$.fragment,i),$(Ge.$$.fragment,i),$(ne),$(ot.$$.fragment,i),$(se),R=!0)},o(i){d(o.$$.fragment,i),d(D.$$.fragment,i),d(P.$$.fragment,i),d(Q.$$.fragment,i),d(_e.$$.fragment,i),d(Re.$$.fragment,i),d(Me.$$.fragment,i),d(ye.$$.fragment,i),d(Te.$$.fragment,i),d(Ne.$$.fragment,i),d(We.$$.fragment,i),d(ze.$$.fragment,i),d(De.$$.fragment,i),d(Ue.$$.fragment,i),d(Ge.$$.fragment,i),d(ne),d(ot.$$.fragment,i),d(se),R=!1},d(i){i&&N(e),b(o),b(D),b(P),i&&N(z),i&&N(O),b(Q),b(_e),b(Re),b(Me),b(ye),b(Te),b(Ne),b(We),b(ze),zs(ie,i),de&&de.d(),b(De),n[44](null),b(Ue),b(Ge),ne&&ne.d(),b(ot),n[56](null),n[57](null),i&&N(wn),se&&se.d(i),i&&N(kt),Cn=!1,wt(es)}}}let Es=!1;function ka(n,e,t){let s,o,l,r;ln(n,Js,g=>t(63,l=g)),ln(n,Ts,g=>t(21,r=g));let c,C,L,W=!1,E=!1,D=!0,w=Ae(0),A=!1,P,z=-1,O=-1,j=-1,I=-1,F=-1,Q,k,q=!1,B,H;const{activePlaylist:U}=ms;ln(n,U,g=>t(2,o=g));let Z,pe,M=!1;function T(){const{index:g}=l;t(1,H=Number(g)),t(16,k=Se.tracks[H]),Be.set(void 0),Ls(async()=>{k.file?await S.openFile(k.file,k.filePath):S.open(k.videoUrl,L,c.offsetWidth-8),ql(k),B=setInterval(()=>{var Te;const J=S.isPlaying;if(J!==q&&t(17,q=J),!w&&!J)return;t(11,z=S.getCurrentTime()),t(9,w=Ae(z)),t(12,O=S.getDuration()||0),t(13,j=S.getVolume()),t(14,I=S.getTempo()),t(15,F=S.getPitch()),t(8,D=!S.isReady());const te=(Te=k.markers[P+1])==null?void 0:Te.value;if(A&&P>=0&&z>te&&jt(k,P),o!==void 0&&S.isReady()&&!q&&!M)try{x(),M=!0}catch{}},400),Q=[Be.subscribe(J=>{switch(J==null?void 0:J.type){case"ADD":_e();break;case"MOVE_ACTIVE":He(J.back);break;case"SET_ACTIVE":Ie(J.index);break;case"SEEK_TO_ACTIVE":jt(k,P);break;case"TOGGLE_HELP":t(7,E=!E);break;case"LOOP":t(10,A=!A);break}})]})}Us(()=>{Q.forEach(g=>g()),S.destroy(),clearInterval(B)});const x=()=>S.playPause(),ee=()=>S.seekToStart();function _e(){const g=S.getCurrentTime();g&&(k.markers.push({value:g}),Vs(k),t(0,P=k.markers.findIndex(J=>J.value===g)),Se.saveTracks())}function Ie(g){g>=0&&g<k.markers.length&&(t(0,P=g),jt(k,P))}function Fe(g){history.back(),Gs(`/add-track/${g}`,50)}function He(g){ea(k,P,g),t(16,k)}async function Ke(g){await ta(k,g),t(16,k)}async function Ve(g){const J=g?pe:Z;Se.openTrack(J,async()=>{history.back(),await Ys(50)})}T();const _t=g=>{t(6,W=!W),g.cancelBubble=!0},Ct=()=>t(7,E=!E),le=()=>In(!0),Re=()=>ds(!0),Pt=()=>In(!1),Ye=()=>ds(!1),Et=()=>jt(k,P),Qe=()=>He(!0),qe=()=>He(!1),mt=()=>t(10,A=!A),Tt=g=>Ke(g),ae=g=>Ie(g),Me=g=>xl(g);function Lt(g){an[g?"unshift":"push"](()=>{L=g,t(5,L)})}const Xe=()=>t(6,W=!1),At=()=>Xl(k),Je=()=>hs(k,j,!0),Ze=()=>hs(k,j,!1),$t=()=>Jl(k),It=()=>vs(k,F,!0),re=()=>vs(k,F,!1),me=()=>Zl(k),ye=()=>bs(k,I,!0),Rt=()=>bs(k,I,!1),xe=()=>Fe(H);function Mt(g){an[g?"unshift":"push"](()=>{C=g,t(4,C)})}function et(g){an[g?"unshift":"push"](()=>{c=g,t(3,c)})}const tt=()=>Ve(!1),dt=()=>Ve(!0);return n.$$.update=()=>{if(n.$$.dirty[0]&1&&t(20,s=P===void 0),n.$$.dirty[0]&6){t(18,Z=void 0),t(19,pe=void 0);const g=ms.playlists[o];if(g){const{tracks:J}=g,te=J.indexOf(H);te>0&&t(18,Z=Se.tracks[J[te-1]]),te<J.length-1&&t(19,pe=Se.tracks[J[te+1]])}}},[P,H,o,c,C,L,W,E,D,w,A,z,O,j,I,F,k,q,Z,pe,s,r,U,x,ee,_e,Ie,Fe,He,Ke,Ve,_t,Ct,le,Re,Pt,Ye,Et,Qe,qe,mt,Tt,ae,Me,Lt,Xe,At,Je,Ze,$t,It,re,me,ye,Rt,xe,Mt,et,tt,dt]}class Ma extends ue{constructor(e){super(),ce(this,e,ka,ba,fe,{},null,[-1,-1,-1])}}export{Ma as default};
